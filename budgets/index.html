<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>BudgetBox - Tidegate Optimization Tool</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../assets/_mkdocstrings.css" rel="stylesheet" />
        <link href="../css/tidegates.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "BudgetBox";
        var mkdocs_page_input_path = "budgets.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Tidegate Optimization Tool
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Home</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="..">Introduction</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">User Instructions</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../user/">How to Use the Optimzation Tool</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Installation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../install/">Install and Configure</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../data/">Data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../server/">Server</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Developer</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../modules/">Modules</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../targets/">Target Definition</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../project/">Project Data</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Widgets</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../widgets/">Widget Classes</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../map/">TGMap</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../regionbox/">RegionBox</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="./">BudgetBox</a>
    <ul class="current">
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../targetbox/">TargetBox</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../infobox/">InfoBox</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../outputpane/">OutputPane</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../downloadpane/">DownloadPane</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../app/">TideGatesApp</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../optipass/">OP (OptiPass Interface)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../main/">Main</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tests/">Tests</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Tidegate Optimization Tool</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Developer</li>
          <li class="breadcrumb-item">Widgets</li>
      <li class="breadcrumb-item active">BudgetBox</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h3 id="budgetbox">BudgetBox</h3>
<p>The widget that displays budget options is an instance of a class named <code>BudgetBox</code>.  It has a set of three tabs that display different options for specifying a budget:</p>
<ul>
<li>
<p>the default view is a slider that sets the maximum budget value; OptiPass will be run 10 times with budgets ranging from 0 up to the maximum</p>
</li>
<li>
<p>an advanced view allows users to set the maximum, the interval between budgets, and the total number of budgets to consider</p>
</li>
<li>
<p>the fixed view has a text entry widget there the user enters a budget, Optipass will be run once using this budget</p>
</li>
</ul>
<p>The BudgetBox class and the three budget views are all defined in <code>src/budgets.py</code>.</p>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>There are three ways users can specify the range of budget values
when running OptiPass.  A BudgetBox widget has one tab for each option.
The widgets displayed inside a tab are defined by their own classes
(BasicBudgetBox, AdvancedBudgetBox, and FixedBudgetBox).</p>

                <details class="quote">
                  <summary>Source code in <code>src/tidegates/budgets.py</code></summary>
                  <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">BudgetBox</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">Tabs</span><span class="p">(</span>
        <span class="p">(</span><span class="s1">&#39;Basic&#39;</span><span class="p">,</span> <span class="n">BasicBudgetBox</span><span class="p">()),</span>
        <span class="p">(</span><span class="s1">&#39;Advanced&#39;</span><span class="p">,</span> <span class="n">AdvancedBudgetBox</span><span class="p">()),</span>
        <span class="p">(</span><span class="s1">&#39;Fixed&#39;</span><span class="p">,</span> <span class="n">FixedBudgetBox</span><span class="p">()),</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="src.tidegates.widgets.BudgetBox.set_budget_max" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">set_budget_max</span><span class="p">(</span><span class="n">n</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>When the user selects or deselects a region the budget widgets need
to know the new total cost for all the selected regions.  This method
passes that information to each of the budget widgets.</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>n</code></b>
                  (<code>int</code>)
              –
              <div class="doc-md-description">
                <p>the new maximum budget amount</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
          <details class="quote">
            <summary> <code>src/tidegates/budgets.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_budget_max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    When the user selects or deselects a region the budget widgets need</span>
<span class="sd">    to know the new total cost for all the selected regions.  This method</span>
<span class="sd">    passes that information to each of the budget widgets.</span>

<span class="sd">    Arguments:</span>
<span class="sd">      n: the new maximum budget amount</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">:</span>
        <span class="n">t</span><span class="o">.</span><span class="n">set_budget_max</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="src.tidegates.widgets.BudgetBox.values" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">values</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the budget settings for the currently selected budget type.</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
    <th class="field-name">Returns:</th>
    <td class="field-body">
      <ul class="first simple">
          <li>
<b><code>bmax</code></b>            –
            <div class="doc-md-description">
              <p>the maximum budget to pass to OptiPass</p>
            </div>
          </li>
          <li>
<b><code>binc</code></b>            –
            <div class="doc-md-description">
              <p>the increment between budget values</p>
            </div>
          </li>
      </ul>
    </td>
    </tr>
  </tbody>
</table>
          <details class="quote">
            <summary> <code>src/tidegates/budgets.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the budget settings for the currently selected budget type.</span>

<span class="sd">    Returns:</span>
<span class="sd">      bmax:  the maximum budget to pass to OptiPass</span>
<span class="sd">      binc:  the increment between budget values</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">active</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div><h4 id="basicbudgetbox">BasicBudgetBox</h4>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>The default budget widget displays a slider that ranges from 0
up to a maximum value based on the total cost of all barriers in
currently selected regions.</p>

                <details class="quote">
                  <summary>Source code in <code>src/tidegates/budgets.py</code></summary>
                  <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">BasicBudgetBox</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">margin</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">labels</span> <span class="o">=</span> <span class="p">[</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">levels</span> <span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">map</span> <span class="o">=</span> <span class="p">{</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">levels</span> <span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">slider</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">DiscreteSlider</span><span class="p">(</span>
        <span class="n">options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">labels</span><span class="p">[:</span><span class="mi">1</span><span class="p">],</span> 
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">labels</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Maximum Budget&#39;</span><span class="p">,</span>
        <span class="n">margin</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">),</span>
        <span class="n">stylesheets</span><span class="o">=</span><span class="p">[</span><span class="n">slider_style_sheet</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h4 id="src.tidegates.budgets.BasicBudgetBox.set_budget_max" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">set_budget_max</span><span class="p">(</span><span class="n">n</span><span class="p">)</span></code>

</h4>


  <div class="doc doc-contents ">
  
      <p>Choose a maximum budget by scanning a table of budget levels to
find the first one less than the total cost.</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>n</code></b>
              –
              <div class="doc-md-description">
                <p>the total cost of all barriers in the current selection.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
          <details class="quote">
            <summary> <code>src/tidegates/budgets.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_budget_max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Choose a maximum budget by scanning a table of budget levels to</span>
<span class="sd">    find the first one less than the total cost.</span>

<span class="sd">    Arguments:</span>
<span class="sd">      n: the total cost of all barriers in the current selection.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">levels</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">levels</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">labels</span><span class="p">[:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">break</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h4 id="src.tidegates.budgets.BasicBudgetBox.values" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">values</span><span class="p">()</span></code>

</h4>


  <div class="doc doc-contents ">
  
      <p>Return the selected budget level (based on the slider position) and
the number of budgets.  For basic budgets the interval between budgets
is computed by dividing the select budget value by the number of increments
(a constant defined in the class, currently equal to 10).</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
    <th class="field-name">Returns:</th>
    <td class="field-body">
      <ul class="first simple">
          <li>
<b><code>bmax</code></b>            –
            <div class="doc-md-description">
              <p>the highest budget to pass to OptiPass</p>
            </div>
          </li>
          <li>
<b><code>binc</code></b>            –
            <div class="doc-md-description">
              <p>the increment between budgets</p>
            </div>
          </li>
      </ul>
    </td>
    </tr>
  </tbody>
</table>
          <details class="quote">
            <summary> <code>src/tidegates/budgets.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the selected budget level (based on the slider position) and</span>
<span class="sd">    the number of budgets.  For basic budgets the interval between budgets</span>
<span class="sd">    is computed by dividing the select budget value by the number of increments</span>
<span class="sd">    (a constant defined in the class, currently equal to 10).</span>

<span class="sd">    Returns:</span>
<span class="sd">      bmax:  the highest budget to pass to OptiPass</span>
<span class="sd">      binc:  the increment between budgets</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">value</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">increments</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div><h4 id="advancedbudgetbox">AdvancedBudgetBox</h4>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>The "advanced" option gives the user the most control over the budget values processed
by OptiPass by letting them specify the number of budget levels (in the basic budget
there are always 10 budget levels).  </p>
<p>This box has three widgets:  a slider to specify the
maximum amount, another slider to specify the increment between budgets, and
an input box to specify the number of budgets.  Adjusting the value of any of these
widgets automatically updates the other two.  For example, if the maximum is set to $1M
and the number of budgets is 10, the increment is $100K.  If the user changes the number
of budgets to 20, the increment drops to $50K.  Or if they change the maximum to $2M, the
increment increases to $200K.</p>

                <details class="quote">
                  <summary>Source code in <code>src/tidegates/budgets.py</code></summary>
                  <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">AdvancedBudgetBox</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">margin</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">cap</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">max_slider</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Maximum Budget&#39;</span><span class="p">,</span> 
        <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
        <span class="n">end</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> 
        <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">MAX_STEP</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">SLIDER_WIDTH</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="n">NumeralTickFormatter</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;$0,0&#39;</span><span class="p">),</span>
        <span class="n">stylesheets</span><span class="o">=</span><span class="p">[</span><span class="n">slider_style_sheet</span><span class="p">],</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">inc_slider</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Budget Interval&#39;</span><span class="p">,</span> 
        <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
        <span class="n">end</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> 
        <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">INC_STEP</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">SLIDER_WIDTH</span><span class="o">//</span><span class="mi">2</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="n">NumeralTickFormatter</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;$0,0&#39;</span><span class="p">),</span>
        <span class="n">stylesheets</span><span class="o">=</span><span class="p">[</span><span class="n">slider_style_sheet</span><span class="p">],</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">count_input</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">IntInput</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Number of Budgets&#39;</span><span class="p">,</span> 
        <span class="n">value</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> 
        <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> 
        <span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">COUNT_MIN</span><span class="p">,</span>
        <span class="n">end</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">COUNT_MAX</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="mi">75</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_slider</span><span class="p">,</span> <span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;Limit: N/A&lt;b&gt;&#39;</span><span class="p">)))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inc_slider</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">count_input</span><span class="p">))</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">max_slider</span><span class="o">.</span><span class="n">param</span><span class="o">.</span><span class="n">watch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_updated</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">inc_slider</span><span class="o">.</span><span class="n">param</span><span class="o">.</span><span class="n">watch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inc_updated</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">count_input</span><span class="o">.</span><span class="n">param</span><span class="o">.</span><span class="n">watch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">count_updated</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
                </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h4 id="src.tidegates.budgets.AdvancedBudgetBox.count_updated" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">count_updated</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></code>

</h4>


  <div class="doc doc-contents ">
  
      <p>Callback function invoked when the user changes the number of budget
levels.  Computes a new budget increment.</p>

          <details class="quote">
            <summary> <code>src/tidegates/budgets.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">count_updated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Callback function invoked when the user changes the number of budget</span>
<span class="sd">    levels.  Computes a new budget increment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">inc_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">count_input</span><span class="o">.</span><span class="n">value</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h4 id="src.tidegates.budgets.AdvancedBudgetBox.inc_updated" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">inc_updated</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></code>

</h4>


  <div class="doc doc-contents ">
  
      <p>Callback function invoked when the user changes the budget increment.
Computes a new number of budgets.</p>

          <details class="quote">
            <summary> <code>src/tidegates/budgets.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">inc_updated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Callback function invoked when the user changes the budget increment.</span>
<span class="sd">    Computes a new number of budgets.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">c</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">COUNT_MIN</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">inc_slider</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="n">c</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">COUNT_MAX</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">count_input</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">c</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h4 id="src.tidegates.budgets.AdvancedBudgetBox.max_updated" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">max_updated</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></code>

</h4>


  <div class="doc doc-contents ">
  
      <p>Callback function invoked when the user moves the maximum budget
slider.  Computes a new budget increment.</p>

          <details class="quote">
            <summary> <code>src/tidegates/budgets.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">max_updated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Callback function invoked when the user moves the maximum budget</span>
<span class="sd">    slider.  Computes a new budget increment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">inc_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_slider</span><span class="o">.</span><span class="n">value</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">count_input</span><span class="o">.</span><span class="n">value</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h4 id="src.tidegates.budgets.AdvancedBudgetBox.set_budget_max" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">set_budget_max</span><span class="p">(</span><span class="n">n</span><span class="p">)</span></code>

</h4>


  <div class="doc doc-contents ">
  
      <p>Called when the user selects or deselects a region.  Save the new
maximum, and update the value of the increment based on the new maximum.</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>n</code></b>
              –
              <div class="doc-md-description">
                <p>the total cost of all barriers in the selected regions.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
          <details class="quote">
            <summary> <code>src/tidegates/budgets.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_budget_max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Called when the user selects or deselects a region.  Save the new</span>
<span class="sd">    maximum, and update the value of the increment based on the new maximum.</span>

<span class="sd">    Arguments:</span>
<span class="sd">      n:  the total cost of all barriers in the selected regions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">max_slider</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">max_slider</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MAX_STEP</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">inc_slider</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">inc_slider</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">INC_STEP</span><span class="p">,</span> <span class="n">n</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">COUNT_MAX</span><span class="p">)</span>
    <span class="n">lim</span> <span class="o">=</span> <span class="s1">&#39;N/A&#39;</span> <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="sa">f</span><span class="s1">&#39;$</span><span class="si">{</span><span class="n">n</span><span class="o">/</span><span class="mi">1000000</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">M&#39;</span>
    <span class="bp">self</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">pane</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&lt;b&gt;Limit: </span><span class="si">{</span><span class="n">lim</span><span class="si">}</span><span class="s1">&lt;/b&gt;&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h4 id="src.tidegates.budgets.AdvancedBudgetBox.values" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">values</span><span class="p">()</span></code>

</h4>


  <div class="doc doc-contents ">
  
      <p>In this widget the maximum budget and budget increment are determined
by the values in the corresponding widgets.</p>

          <details class="quote">
            <summary> <code>src/tidegates/budgets.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    In this widget the maximum budget and budget increment are determined</span>
<span class="sd">    by the values in the corresponding widgets.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_slider</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">inc_slider</span><span class="o">.</span><span class="n">value</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div><h4 id="fixedbudgetbox">FixedBudgetBox</h4>


<div class="doc doc-object doc-class">




  <div class="doc doc-contents first">

  
      <p>This option is for situations where a user knows exactly how much money they
have to spend and want to know the optimal set of barriers to replace for that
amount of money.  OptiPass is run twice -- once to determine the current 
passabilities, and once to compute the benefit from the specified budget.
The widget simply displays a box where the user enters the dollar amount for
their budget.</p>

                <details class="quote">
                  <summary>Source code in <code>src/tidegates/budgets.py</code></summary>
                  <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">FixedBudgetBox</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">margin</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">input</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">TextInput</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Budget Amount&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;$&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h4 id="src.tidegates.budgets.FixedBudgetBox.parse_dollar_amount" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">parse_dollar_amount</span><span class="p">(</span><span class="n">s</span><span class="p">)</span></code>

</h4>


  <div class="doc doc-contents ">
  
      <p>Make sure the string entered by the user has an acceptable format.
It can be all digits (e.g. "1500000"), or digits separated by commas
(e.g. "1,500,000"), or a number followed by a K or M (e.g. "1.5M").
There can be a dollar sign at the front of the string.</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>s</code></b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>the string entered into the text box</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
    <th class="field-name">Returns:</th>
    <td class="field-body">
      <ul class="first simple">
          <li>
            –
            <div class="doc-md-description">
              <p>the value of the string converted into an integer</p>
            </div>
          </li>
      </ul>
    </td>
    </tr>
  </tbody>
</table>
          <details class="quote">
            <summary> <code>src/tidegates/budgets.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">parse_dollar_amount</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Make sure the string entered by the user has an acceptable format.</span>
<span class="sd">    It can be all digits (e.g. &quot;1500000&quot;), or digits separated by commas</span>
<span class="sd">    (e.g. &quot;1,500,000&quot;), or a number followed by a K or M (e.g. &quot;1.5M&quot;).</span>
<span class="sd">    There can be a dollar sign at the front of the string.</span>

<span class="sd">    Arguments:</span>
<span class="sd">      s:  the string entered into the text box</span>

<span class="sd">    Returns:</span>
<span class="sd">      the value of the string converted into an integer</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;$&#39;</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s1">&#39;K&#39;</span><span class="p">,</span><span class="s1">&#39;M&#39;</span><span class="p">)):</span>
            <span class="n">multiplier</span> <span class="o">=</span> <span class="mi">1000</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;K&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="mi">1000000</span>
            <span class="n">res</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">s</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">*</span> <span class="n">multiplier</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s1">&#39;,&#39;</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
            <span class="n">parts</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&lt;=</span> <span class="mi">3</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="nb">all</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span>
            <span class="n">res</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parts</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;unexpected format in dollar amount&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h4 id="src.tidegates.budgets.FixedBudgetBox.values" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">values</span><span class="p">()</span></code>

</h4>


  <div class="doc doc-contents ">
  
      <p>Return the specified budget amount as both the maximum budget and the
budget interval.</p>

          <details class="quote">
            <summary> <code>src/tidegates/budgets.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the specified budget amount as both the maximum budget and the</span>
<span class="sd">    budget interval.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">value</span>
    <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;$&#39;</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_dollar_amount</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">n</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../regionbox/" class="btn btn-neutral float-left" title="RegionBox"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../targetbox/" class="btn btn-neutral float-right" title="TargetBox">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../regionbox/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../targetbox/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
